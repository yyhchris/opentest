import cv2
import os

def horizontal_concatenate(folder1, folder2, output_folder):
    # 获取两个文件夹中的所有文件
    files1 = os.listdir(folder1)
    files2 = os.listdir(folder2)

    # 确保两个文件夹中存在相同的文件名
    common_files = set(files1) & set(files2)

    # 遍历相同的文件，并进行横向拼接
    for file_name in common_files:
        # 读取图像
        img1 = cv2.imread(os.path.join(folder1, file_name))
        img2 = cv2.imread(os.path.join(folder2, file_name))

        # 检查图像是否读取成功
        if img1 is None or img2 is None:
            print(f"Failed to read {file_name}")
            continue

        # 横向拼接图像
        result = cv2.hconcat([img1, img2])

        # 保存拼接后的图像
        output_file = os.path.join(output_folder, file_name)
        cv2.imwrite(output_file, result)

        print(f"{file_name} processed and saved.")

if __name__ == "__main__":
    folder1 = "E:/DLKR/PaddleOCR/OCRTrain/PaddleOCR-2.7.5/testimg"
    folder2 = "E:/DLKR/PaddleOCR/OCRTrain/PaddleOCR-2.7.5/inference_results"
    output_folder = "result"

    # 创建输出文件夹
    os.makedirs(output_folder, exist_ok=True)

    # 执行拼接操作
    horizontal_concatenate(folder1, folder2, output_folder)
